{% extends 'base.html' %}

{% block content %}

<div class="shops-header">
    <h2>Shops in Selected City</h2>

    <div class="controls">
        <form method="get" class="search-form">
            <input type="text" name="q" placeholder="Search shop..." value="{{ request.GET.q }}">
            <button type="submit">Search</button>
        </form>

        <form method="get" class="filter-form">
            <select name="category">
                <option value="">All</option>
                <option value="Mens Wear">Mens Wear</option>
                <option value="Tailoring">Tailoring</option>
                <option value="Electronics">Electronics</option>
            </select>
            <button type="submit">Filter</button>
        </form>
    </div>
</div>

<p>{{ shops|length }} result(s) found</p>

{% if shops %}
<div class="shop-grid">
    {% for shop in shops %}
    <div class="shop-card">
        <h3>{{ shop.name }}</h3>
        <p><strong>Category:</strong> {{ shop.category }}</p>
        <p><strong>Contact:</strong> {{ shop.contact }}</p>
        <p><strong>Address:</strong> {{ shop.address|default:"Not available" }}</p>
        <p><strong>Timings:</strong> {{ shop.open_time }} â€“ {{ shop.close_time }}</p>

        {% if shop.is_open %}
            <span class="status open">Open Now</span>
        {% else %}
            <span class="status closed">Closed</span>
        {% endif %}

        <a href="{% url 'shop_detail' shop.id %}" class="details-btn">View Details</a>
    </div>
    {% endfor %}
</div>
{% else %}
<p>No shops available.</p>
{% endif %}

{% endblock %}
